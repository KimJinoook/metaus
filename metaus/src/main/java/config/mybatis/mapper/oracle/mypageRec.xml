<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.metaus.commission.model.MypageDAO">
	<select id="selectAll" parameterType="int" resultType="MypageVO">
	select * from
		(
			select rownum as RNUM, R.*
			from
				(	
		
		select A.*, B.*, C.*,(select count(*) from fp_recpre D where B.rec_no = D.rec_no) rec_count  
		from fp_recpre A join fp_rec B 
		on A.rec_no = B.rec_no 
		join fp_com C 
		on B.com_no = C.com_no 
		where A.mem_no = #{memNo}
		order by A.rec_no desc
		)R
		)
		where
		RNUM>#{firstRecordIndex} 
		<![CDATA[	
		and RNUM<=#{firstRecordIndex} + #{recordCountPerPage} ]]>
 	</select>
 	
 	<select id="getTotalRecord" resultType="int" parameterType="int">
 			
		select count(*) from fp_recpre  where mem_no = #{memNo}
	
	</select>
</mapper>